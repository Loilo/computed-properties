var Store=function(){"use strict";function e(e){return!(!Array.isArray(e)&&("object"!=typeof e||null===e||e.prototype)||!e.$destroy)}function t(...e){if(0===e.length)throw new TypeError("Cannot convert undefined or null to object");if("assign"in Object)return Object.assign(...e);if(1===e.length)return e[0];for(let t in e[1])e[0][t]=e[1][t];return t(e[0],...e.slice(2))}function n(c,l){if(e(l))return l;if(Array.isArray(l)){const e=l.slice(0);for(let t=0;t<e.length;t++)e[t]=n(c,e[t]);return function(e,...t){let r=!0;const c=[],l=()=>{r||e()},u=t=>n(e,t),i=(e,...t)=>Array.prototype[e].call(c,...t);return Object.defineProperty(c,"push",{value:function(...e){const t=i("push",...e.map(u));return e.length&&l(),t},enumerable:!1}),Object.defineProperty(c,"pop",{value:function(){const e=c.length,t=i("pop");return e&&l(),t},enumerable:!1}),Object.defineProperty(c,"shift",{value:function(){const e=c.length,t=i("shift");return e&&l(),t},enumerable:!1}),Object.defineProperty(c,"unshift",{value:function(...e){const t=i("unshift",...e.map(u));return e.length&&l(),t},enumerable:!1}),Object.defineProperty(c,"splice",{value:function(e,t,...n){const r=i("splice",e,t,...n.map(u));return(r.length||n.length)&&l(),r},enumerable:!1}),Object.defineProperty(c,"sort",{value:function(e){const t=i("sort",e);return l(),t},enumerable:!1}),Object.defineProperty(c,"reverse",{value:function(){const e=i("reverse");return l(),e},enumerable:!1}),Object.defineProperty(c,"$raw",{value:()=>c.slice(0),enumerable:!1}),Object.defineProperty(c,"$set",{value:function(e,t){c[e]=u(t),l()},enumerable:!1}),Object.defineProperty(c,"$destroy",{value:function(){return r=!0,c.map(o)},enumerable:!1}),c.push(...t),r=!1,c}(c,...e)}if(function(e){return"object"==typeof e&&null!==e&&null==e.prototype}(l)){const e=t({},l);for(const t in e)e[t]=n(c,e[t]);return function(e,o){const c=Object.create(null);let l=!0;const u=[],i=()=>{l||e()};function s(){return Object.getOwnPropertyNames(c).filter(e=>"$"!==e[0]).reduce((e,n)=>t(Object.create(null),e,{[n]:r(c[n])}),Object.create(null))}function a(t,r){if(-1!==u.indexOf(t))throw new Error(`Property ${t} is already defined`);let o=r;Object.defineProperty(c,t,{get:()=>o,set(t){const r=t!==o;o=n(e,t),r&&i()},enumerable:!0,configurable:!0}),u.push(t),i()}return Object.defineProperty(c,"$set",{value(e,t){a(e,t)},enumerable:!1}),Object.defineProperty(c,"$raw",{value:()=>s(),enumerable:!1}),Object.defineProperty(c,"$destroy",{value:()=>(l=!0,s()),enumerable:!1}),function(){for(const e of Object.keys(o))a(e,o[e])}(),l=!1,c}(c,e)}return l}function r(t){return e(t)?t.$raw():t}function o(t){return e(t)?t.$destroy():t}return function(e,{verbose:o=!1}={}){const c=Object.create(null);let l=!1,u=null,i=Object.create(null);const s=Object.create(null),a={},f={},p=Object.create(null),b=Object.keys(e),d=[];function y(e){o&&console.log("  invalidate cache of property",e),a.hasOwnProperty(e)&&(f[e]=a[e],delete a[e]),c[e]&&p[e];for(const t of Object.keys(s[e]))y(t)}function O(t){let r=n(()=>y(t),e[t]);Object.defineProperty(p,t,{get:()=>(o&&console.log("Accessed property",t,"=",r),l&&(o&&console.log("  through tracking of computed property",u),i[u][t]=!0),r),set(e){if(e===r)return;const l=r;r=n(()=>y(t),e),o&&console.log("Set value of property",t,"=",r),o&&console.log("  dependencies to notify:",Object.keys(s[t]));for(const e of Object.keys(s[t]))y(e);c[t]&&c[t].forEach(e=>e(r,l))}})}function j(t){let n=[];Object.defineProperty(p,t,{get(){if(o&&console.log("Accessed computed property",t),l&&(o&&console.log("  through tracking of computed property",u),i[u][t]=!0),a.hasOwnProperty(t))return o&&console.log("  got it from cache"),a[t];const r=f.hasOwnProperty(t);o&&console.log(r?"  it had already been changed":"  it has never been changed before");const b=function(t){const n=l,r=u;l=!0,u=t,i[t]=Object.create(null);const o=e[t].call(p,p),c=Object.keys(i[t]||Object.create(null));return delete i[t],n?u=r:l=!1,{dependencies:c,value:o}}(t),d=b.dependencies,y=n;for(const e of y)delete s[e][t];for(const e of d)s[e][t]=!0;return n=b.dependencies,o&&console.log("  re-evaluated the computed property"),o&&console.log("    dependencies:",n),o&&console.log("    new value:",b.value),a[t]=b.value,r&&f[t]!==b.value&&c[t]&&c[t].forEach(e=>e(b.value,f[t])),r&&delete f[t],b.value}})}return function(){for(const t of b)s[t]=Object.create(null),"function"==typeof e[t]?(j(t),d.push(t)):O(t);return Object.defineProperty(p,"$raw",{value:(e=!0)=>(e=e,Object.getOwnPropertyNames(p).filter(t=>"$"!==t[0]&&(e||-1===d.indexOf(t))).reduce((e,n)=>t(Object.create(null),e,{[n]:r(p[n])}),Object.create(null))),enumerable:!1}),Object.defineProperty(p,"$watch",{value:(e,t)=>(e in c||(c[e]=[],p[e]),c[e].push(t),()=>{c[e].splice(c[e].indexOf(t),1),c[e].length||delete c[e]}),enumerable:!1}),Symbol&&(p[Symbol.iterator]=function*(){for(let e=0;e<b.length;e++)yield b[e]}),p;var n}()}}();
