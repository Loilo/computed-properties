var Store=function(){"use strict";function e(e){return!(!Array.isArray(e)&&("object"!=typeof e||null===e||e.prototype)||!e.$destroy)}function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new TypeError("Cannot convert undefined or null to object");if("assign"in Object)return Object.assign.apply(Object,e);if(1===e.length)return e[0];for(var t in e[1])e[0][t]=e[1][t];return r.apply(void 0,[e[0]].concat(e.slice(2)))}function n(u,c){if(e(c))return c;if(Array.isArray(c)){for(var a=c.slice(0),l=0;l<a.length;l++)a[l]=n(u,a[l]);return function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var u=!0,c=[],a=function(){u||e()},l=function(r){return n(e,r)},i=function(e){for(var r,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return(r=Array.prototype[e]).call.apply(r,[c].concat(n))};return Object.defineProperty(c,"push",{value:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=i.apply(void 0,["push"].concat(e.map(l)));return e.length&&a(),n},enumerable:!1}),Object.defineProperty(c,"pop",{value:function(){var e=c.length,r=i("pop");return e&&a(),r},enumerable:!1}),Object.defineProperty(c,"shift",{value:function(){var e=c.length,r=i("shift");return e&&a(),r},enumerable:!1}),Object.defineProperty(c,"unshift",{value:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=i.apply(void 0,["unshift"].concat(e.map(l)));return e.length&&a(),n},enumerable:!1}),Object.defineProperty(c,"splice",{value:function(e,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];var o=i.apply(void 0,["splice",e,r].concat(n.map(l)));return(o.length||n.length)&&a(),o},enumerable:!1}),Object.defineProperty(c,"sort",{value:function(e){var r=i("sort",e);return a(),r},enumerable:!1}),Object.defineProperty(c,"reverse",{value:function(){var e=i("reverse");return a(),e},enumerable:!1}),Object.defineProperty(c,"$raw",{value:function(){return c.slice(0)},enumerable:!1}),Object.defineProperty(c,"$set",{value:function(e,r){c[e]=l(r),a()},enumerable:!1}),Object.defineProperty(c,"$destroy",{value:function(){return u=!0,c.map(o)},enumerable:!1}),c.push.apply(c,r),u=!1,c}.apply(void 0,[u].concat(a))}if(function(e){return"object"==typeof e&&null!==e&&null==e.prototype}(c)){a=r({},c);for(var i in a)a[i]=n(u,a[i]);return function(e,o){var u=Object.create(null),c=!0,a=[],l=function(){c||e()};function i(){return Object.getOwnPropertyNames(u).filter(function(e){return"$"!==e[0]}).reduce(function(e,n){return r(Object.create(null),e,((o={})[n]=t(u[n]),o));var o},Object.create(null))}function f(r,t){if(-1!==a.indexOf(r))throw new Error("Property "+r+" is already defined");var o=t;Object.defineProperty(u,r,{get:function(){return o},set:function(r){var t=r!==o;o=n(e,r),t&&l()},enumerable:!0,configurable:!0}),a.push(r),l()}return Object.defineProperty(u,"$set",{value:function(e,r){f(e,r)},enumerable:!1}),Object.defineProperty(u,"$raw",{value:function(){return i()},enumerable:!1}),Object.defineProperty(u,"$destroy",{value:function(){return c=!0,i()},enumerable:!1}),function(){for(var e=0,r=Object.keys(o);e<r.length;e++){var n=r[e];f(n,o[n])}}(),c=!1,u}(u,a)}return c}function t(r){return e(r)?r.$raw():r}function o(r){return e(r)?r.$destroy():r}return function(e,o){var u=(void 0===o?{}:o).verbose,c=void 0!==u&&u,a=Object.create(null),l=!1,i=null,f=Object.create(null),p=Object.create(null),s={},v={},b=Object.create(null),d=Object.keys(e),y=[];function h(e){c&&console.log("  invalidate cache of property",e),s.hasOwnProperty(e)&&(v[e]=s[e],delete s[e]),a[e]&&b[e];for(var r=0,n=Object.keys(p[e]);r<n.length;r++)h(n[r])}function g(r){var t=n(function(){return h(r)},e[r]);Object.defineProperty(b,r,{get:function(){return c&&console.log("Accessed property",r,"=",t),l&&(c&&console.log("  through tracking of computed property",i),f[i][r]=!0),t},set:function(e){if(e!==t){var o=t;t=n(function(){return h(r)},e),c&&console.log("Set value of property",r,"=",t),c&&console.log("  dependencies to notify:",Object.keys(p[r]));for(var u=0,l=Object.keys(p[r]);u<l.length;u++)h(l[u]);a[r]&&a[r].forEach(function(e){return e(t,o)})}}})}function O(r){var n=[];Object.defineProperty(b,r,{get:function(){if(c&&console.log("Accessed computed property",r),l&&(c&&console.log("  through tracking of computed property",i),f[i][r]=!0),s.hasOwnProperty(r))return c&&console.log("  got it from cache"),s[r];var t=v.hasOwnProperty(r);c&&console.log(t?"  it had already been changed":"  it has never been changed before");for(var o=function(r){var n=l,t=i;l=!0,i=r,f[r]=Object.create(null);var o=e[r].call(b,b),u=Object.keys(f[r]||Object.create(null));return delete f[r],n?i=t:l=!1,{dependencies:u,value:o}}(r),u=o.dependencies,d=0,y=n;d<y.length;d++){var h=y[d];delete p[h][r]}for(var g=0,O=u;g<O.length;g++){var j=O[g];p[j][r]=!0}return n=o.dependencies,c&&console.log("  re-evaluated the computed property"),c&&console.log("    dependencies:",n),c&&console.log("    new value:",o.value),s[r]=o.value,t&&v[r]!==o.value&&a[r]&&a[r].forEach(function(e){return e(o.value,v[r])}),t&&delete v[r],o.value}})}return function(){for(var n=0,o=d;n<o.length;n++){var u=o[n];p[u]=Object.create(null),"function"==typeof e[u]?(O(u),y.push(u)):g(u)}return Object.defineProperty(b,"$raw",{value:function(e){return void 0===e&&(e=!0),function(e){return Object.getOwnPropertyNames(b).filter(function(r){return"$"!==r[0]&&(e||-1===y.indexOf(r))}).reduce(function(e,n){return r(Object.create(null),e,((o={})[n]=t(b[n]),o));var o},Object.create(null))}(e)},enumerable:!1}),Object.defineProperty(b,"$watch",{value:function(e,r){return e in a||(a[e]=[],b[e]),a[e].push(r),function(){a[e].splice(a[e].indexOf(r),1),a[e].length||delete a[e]}},enumerable:!1}),Symbol&&(b[Symbol.iterator]=function(){var e;return __generator(this,function(r){switch(r.label){case 0:e=0,r.label=1;case 1:return e<d.length?[4,d[e]]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})}),b}()}}();
