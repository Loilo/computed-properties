function e(e){return!(!Array.isArray(e)&&("object"!=typeof e||null===e||e.prototype)||!e.$destroy)}function r(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)throw new TypeError("Cannot convert undefined or null to object");if("assign"in Object)return Object.assign.apply(Object,e);if(1===e.length)return e[0];for(var t in e[1])e[0][t]=e[1][t];return r.apply(void 0,[e[0]].concat(e.slice(2)))}function n(u,c){if(e(c))return c;if(Array.isArray(c)){for(var l=c.slice(0),a=0;a<l.length;a++)l[a]=n(u,l[a]);return function(e){for(var r=[],t=arguments.length-1;t-- >0;)r[t]=arguments[t+1];var u=!0,c=[],l=function(){u||e()},a=function(r){return n(e,r)},i=function(e){for(var r,n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];return(r=Array.prototype[e]).call.apply(r,[c].concat(n))};return Object.defineProperty(c,"push",{value:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=i.apply(void 0,["push"].concat(e.map(a)));return e.length&&l(),n},enumerable:!1}),Object.defineProperty(c,"pop",{value:function(){var e=c.length,r=i("pop");return e&&l(),r},enumerable:!1}),Object.defineProperty(c,"shift",{value:function(){var e=c.length,r=i("shift");return e&&l(),r},enumerable:!1}),Object.defineProperty(c,"unshift",{value:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=i.apply(void 0,["unshift"].concat(e.map(a)));return e.length&&l(),n},enumerable:!1}),Object.defineProperty(c,"splice",{value:function(e,r){for(var n=[],t=arguments.length-2;t-- >0;)n[t]=arguments[t+2];var o=i.apply(void 0,["splice",e,r].concat(n.map(a)));return(o.length||n.length)&&l(),o},enumerable:!1}),Object.defineProperty(c,"sort",{value:function(e){var r=i("sort",e);return l(),r},enumerable:!1}),Object.defineProperty(c,"reverse",{value:function(){var e=i("reverse");return l(),e},enumerable:!1}),Object.defineProperty(c,"$raw",{value:function(){return c.slice(0)},enumerable:!1}),Object.defineProperty(c,"$set",{value:function(e,r){c[e]=a(r),l()},enumerable:!1}),Object.defineProperty(c,"$destroy",{value:function(){return u=!0,c.map(o)},enumerable:!1}),c.push.apply(c,r),u=!1,c}.apply(void 0,[u].concat(l))}if(function(e){return"object"==typeof e&&null!==e&&null==e.prototype}(c)){var i=r({},c);for(var f in i)i[f]=n(u,i[f]);return function(e,o){var u=Object.create(null),c=!0,l=[],a=function(){c||e()};function i(){return Object.getOwnPropertyNames(u).filter(function(e){return"$"!==e[0]}).reduce(function(e,n){var o;return r(Object.create(null),e,((o={})[n]=t(u[n]),o))},Object.create(null))}function f(r,t){if(-1!==l.indexOf(r))throw new Error("Property "+r+" is already defined");var o=t;Object.defineProperty(u,r,{get:function(){return o},set:function(r){var t=r!==o;o=n(e,r),t&&a()},enumerable:!0,configurable:!0}),l.push(r),a()}return Object.defineProperty(u,"$set",{value:function(e,r){f(e,r)},enumerable:!1}),Object.defineProperty(u,"$raw",{value:function(){return i()},enumerable:!1}),Object.defineProperty(u,"$destroy",{value:function(){return c=!0,i()},enumerable:!1}),function(){for(var e=0,r=Object.keys(o);e<r.length;e+=1){var n=r[e];f(n,o[n])}}(),c=!1,u}(u,i)}return c}function t(r){return e(r)?r.$raw():r}function o(r){return e(r)?r.$destroy():r}module.exports=function(e,o){void 0===o&&(o={});var u=o.verbose;void 0===u&&(u=!1);var c=Object.create(null),l=!1,a=null,i=Object.create(null),f=Object.create(null),p={},v={},s=Object.create(null),d=Object.keys(e),b=[];function y(e){u&&console.log("  invalidate cache of property",e),p.hasOwnProperty(e)&&(v[e]=p[e],delete p[e]);for(var r=0,n=Object.keys(f[e]);r<n.length;r+=1)y(n[r])}function h(r){var t=n(function(){return y(r)},e[r]);Object.defineProperty(s,r,{get:function(){return u&&console.log("Accessed property",r,"=",t),l&&(u&&console.log("  through tracking of computed property",a),i[a][r]=!0),t},set:function(e){if(e!==t){var o=t;t=n(function(){return y(r)},e),u&&console.log("Set value of property",r,"=",t),u&&console.log("  dependencies to notify:",Object.keys(f[r]));for(var l=0,a=Object.keys(f[r]);l<a.length;l+=1)y(a[l]);c[r]&&c[r].forEach(function(e){return e(t,o)})}}})}function g(r){var n=[];Object.defineProperty(s,r,{get:function(){if(u&&console.log("Accessed computed property",r),l&&(u&&console.log("  through tracking of computed property",a),i[a][r]=!0),p.hasOwnProperty(r))return u&&console.log("  got it from cache"),p[r];var t=v.hasOwnProperty(r);u&&console.log(t?"  it had already been changed":"  it has never been changed before");for(var o=function(r){var n=l,t=a;l=!0,a=r,i[r]=Object.create(null);var o=e[r].call(s,s),u=Object.keys(i[r]||Object.create(null));return delete i[r],n?a=t:l=!1,{dependencies:u,value:o}}(r),d=o.dependencies,b=0,y=n;b<y.length;b+=1)delete f[y[b]][r];for(var h=0,g=d;h<g.length;h+=1)f[g[h]][r]=!0;return n=o.dependencies,u&&console.log("  re-evaluated the computed property"),u&&console.log("    dependencies:",n),u&&console.log("    new value:",o.value),p[r]=o.value,t&&v[r]!==o.value&&c[r]&&c[r].forEach(function(e){return e(o.value,v[r])}),t&&delete v[r],o.value}})}return function(){for(var n=0,o=d;n<o.length;n+=1){var u=o[n];f[u]=Object.create(null),"function"==typeof e[u]?(g(u),b.push(u)):h(u)}return Object.defineProperty(s,"$raw",{value:function(e){return void 0===e&&(e=!0),function(e){return Object.getOwnPropertyNames(s).filter(function(r){return"$"!==r[0]&&(e||-1===b.indexOf(r))}).reduce(function(e,n){var o;return r(Object.create(null),e,((o={})[n]=t(s[n]),o))},Object.create(null))}(e)},enumerable:!1}),Object.defineProperty(s,"$watch",{value:function(e,r){return e in c||(c[e]=[]),c[e].push(r),function(){c[e].splice(c[e].indexOf(r),1),c[e].length||delete c[e]}},enumerable:!1}),s}()};
//# sourceMappingURL=store.js.map
